<!DOCTYPE html>
<html>
    <!-- React -->
    <script src="https://fb.me/react-0.13.3.min.js"></script>
    <script src="https://fb.me/JSXTransformer-0.13.3.js"></script>

<title>Clients - LocalStorage</title>
</head>
<body>
    <div id="container"></div>
	
<script type="text/jsx">

var Item = React.createClass({
	render: function() {
		return (
			<div>
				<h3>{this.props.id}</h3>
				<h3>{this.props.name}</h3>
				<hr/>
			</div>
		);
	}
});

var App = React.createClass({
	getInitialState: function() {
		var clients = JSON.parse(localStorage.getItem('ui-warehouse.clients'));
		return {
			items: [{name:1}]
		};
	},
	addItem: function() {
 		var items = this.state.items;
		items.push({
				id: items.length+1,
				name: items.length+1
			});
		this.setState({items: items});
 	},
	getClients: function() {
		var that = this;
		var request = new XMLHttpRequest(); 
		var url = 'http://ui-warehouse.herokuapp.com/api/clients/get';
		
		request.onreadystatechange = function() {
			if(request.status==200) {
				that.setState({items: JSON.parse(request.response)});
			}
		};
		
		request.open ('GET', url, false); 
		request.send(''); 
 	},	
	render: function() {
		var items = this.state.items.map(function(item) {
 			return (<Item id={item.id} name={item.name} />);
		});
		return (
			<div onClick={this.getClients}>{items}</div>
		);
	}
});

React.render(<App />, document.getElementById('container'));	
</script>

</body>
</html>